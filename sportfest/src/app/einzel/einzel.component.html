<md-card>
  <md-card-header>
    <h3>{{ sportart }}</h3>
  </md-card-header>
</md-card>

<md-card>
  <md-card-header>
    <h4>Beschreibung</h4>
  </md-card-header>
  <md-card-content>
    {{ beschreibung }}
  </md-card-content>
</md-card>

<md-card>
  <md-card-header>
    <h4>Ergebnis eintragen</h4>
  </md-card-header>
  <md-card-content>
    <md-select placeholder="Klasse" [(ngModel)]="sendeErgebnis.kid">
      <md-option *ngFor="let klasse of klassen" [value]="klasse.kid">
        {{ klasse.name }}
      </md-option>
    </md-select>
    
    <md-select placeholder="SchÃ¼ler" [(ngModel)]="sendeErgebnis.sid">
      <md-option *ngFor="let s of allSchueler[sendeErgebnis.kid]" [value]="s.sid">
        <!--<div *ngIf="s.kid==sendeErgebnis.kid"> </div>-->
          {{ s.vorname }} {{ s.name }}
       
      </md-option>
    </md-select>
    
    <div *ngFor="let v of variablen, let i=index">
      <input type="text" mdInput [placeholder]="v.desc" [(ngModel)]="ergebnisse[i].wert" (on-init)="setVarId(v.varId, i)"/>
    </div>
  
    <button md-raised-button (click)="save()" color="accent">Speichern</button>
  </md-card-content>
</md-card>


<md-card>
  <md-card-header>
    <h4>Ergebnisse</h4>
  </md-card-header>
  <md-card-content>

    <table width="100%">
      <tr>
        <th>
          <button md-raised-button (click)="klasseAufklappen=!klasseAufklappen" color="accent">Klassenlisten anzeigen</button>
        </th>
      </tr>
      <div *ngIf="klasseAufklappen">
        <tr>
          <td>
            <md-card>
              <md-list *ngFor="let klasse of klassen">
                <h3 (click)="aufklappen(klasse.kid)">{{klasse.name}}</h3>
                <div *ngIf="aufgeklappt[klasse.kid]">
                  <table width="100%">
                    <tr *ngFor="let s of allSchueler[klasse.kid]">
                      <td width="50%">
                        <span>{{ s.vorname }} {{ s.name }}:</span>
                      </td>
                      <td width="50%">
                        <md-input-container *ngFor="let v of variablen">
                          <input mdInput placeholder="v.name" type="text"
                            [disabled]="inputDisabled(ergebnis[s.sid][v.var_id])"
                            [(ngModel)]="ergebnis[s.sid][v.var_id].ergebnis">
                        </md-input-container>
                      </td>
                    </tr>
                  </table>
                </div>
              </md-list>
            </md-card>
          </td>
        </tr>
      </div>
      <tr>
        <td align="center" valign="top">
          <!--Bestenliste der Sportart-->
          <md-card>
            <md-card-header>
              <h4>Bestenliste "{{sportart}}"</h4>
            </md-card-header>
            <md-card-content>
              <table>
                <tr>
                  <th align="left" (click)="(sortRev)? sortByRangRev() : sortByRang()">
                    Platzierung <md-icon>import_export</md-icon>
                  </th>
                  <th align="left">Name</th>
                  <th align="left">Ergebnis</th>
                </tr>
                <tr *ngFor="let s of bestenSchueler">
                  <td>{{s.value + 1}}</td>
                  <td>{{s.viewValue}}</td>
                  <td>{{s.ergebnis}}<td>
                </tr>
              </table>
            </md-card-content>
          </md-card>
        </td>
      </tr>
    </table>    
  </md-card-content>
</md-card>